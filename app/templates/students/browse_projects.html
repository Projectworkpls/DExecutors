{% extends "base.html" %}

{% block title %}Browse Projects - DExecutors{% endblock %}

{% block content %}
<style>
.browse-container {
    max-width: 900px;
    margin: 40px auto 0 auto;
    padding: 0 16px;
}
.browse-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 28px;
}
.browse-header h2 {
    margin: 0;
    color: #2357d5;
    font-size: 2rem;
    font-weight: 700;
}
.project-list {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 28px;
}
.project-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 16px rgba(60, 90, 200, 0.08);
    padding: 24px 20px 20px 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
.project-card h3 {
    margin: 0 0 10px 0;
    color: #2d3a60;
    font-size: 1.15rem;
    font-weight: 600;
}
.project-meta {
    font-size: 0.98rem;
    color: #4a5a7a;
    margin-bottom: 10px;
}
.project-card .btn-small {
    margin-top: 10px;
    font-size: 0.97rem;
    padding: 6px 16px;
    border-radius: 6px;
    background: #e7efff;
    color: #2357d5;
    border: none;
    font-weight: 600;
    transition: background 0.18s;
    text-decoration: none;
    display: inline-block;
}
.project-card .btn-small:hover {
    background: #d2e2ff;
}
.empty-state {
    margin: 48px 0;
    color: #888;
    text-align: center;
}
@media (max-width: 800px) {
    .project-list { grid-template-columns: 1fr; }
}
</style>

<div class="browse-container">
    <div class="browse-header">
        <h2>Browse Projects</h2>
        <a href="{{ url_for('students.student_dashboard') }}" class="btn-secondary">Back to Dashboard</a>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
          {% for category, message in messages %}
            <li class="flash-{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    {% if projects %}
    <div class="project-list">
        {% for project in projects %}
        <div class="project-card">
            <h3>{{ project.title }}</h3>
            <div class="project-meta">
                <span>Budget: â‚¹{{ project.budget }}</span>
                {% if project.deadline %}
                <span>Deadline: {{ project.deadline|date('d M Y') }}</span>
                {% endif %}
                {% if project.ai_feasibility_score %}
                <span>AI Score: {{ project.ai_feasibility_score }}%</span>
                {% endif %}
            </div>
            <div>
                <form method="POST" action="{{ url_for('students.apply_for_project', project_id=project.id) }}">
                    <button type="submit" class="btn-small">Apply</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <p>No open projects available at the moment.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
